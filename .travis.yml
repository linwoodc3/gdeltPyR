language: python
os:
  - linux
  - osx

compiler:
  - gcc
  - clang


python:
  - "2.7"
  - "3.4"
  - "3.5"
  - "3.6"

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.8
    - g++-4.8
    - python-dev
    - libgdal-dev
    - libgeos-dev
    - python-gdal
    - libgeos++-dev
    - libspatialindex-dev

env:
  - GDELT=false
  - GDELT=true

before_install:
  - brew install gdal geos gcc spatialindex
  - "pip install pip -U"


# command to install dependencies
install:
  - "pip install pytest-cov"
  - if [ "$GDELT" == true ]; then
        echo 'plus testing'; pip install -r requirements_geo.txt;
        else pip install -r requirements.txt;
    fi;
  - pip install -r requirements.txt

# command to run tests
script:
  - pytest
  - py.test --cov=./

after_success:
  - codecov